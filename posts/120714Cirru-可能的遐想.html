<title>Cirru 一些遐想</title><meta charset='utf-8'>  <div id='article'><a id='home' href='../index.html'>Home</a><link rel="stylesheet" href="../style.css"><pre> </pre><pre><pre class='title'>Cirru 一些遐想</pre></pre><pre> </pre><pre>越发觉得 <code class="inline_code">Cirru</code> 是个泥潭, 两天写不出代码也逃不出去</pre><pre>我犯的错误是不自量力想弄点花哨的语言特性出来, 而且做不到就不想继续</pre><pre>脑海里的确划过了一些自以为漂亮的点子, 我试着描述一下</pre><pre> </pre><pre>首先关于用作用域减少重复代码的使用, 特别在对象方法使用的时候</pre><pre>比如代码中导入模块的手法两种相对的手法,</pre><pre>一种导入后直接在全局作用域内使用对应的函数, 比如 C 那么做</pre><pre>一种导入的实在对象, 就要点号访问对象的方法使用, 比如 Node</pre><pre>另外像 hs 似乎两者皆可, 具体不清晰.. 后悔没细学了</pre><pre>全局导入, 就有覆盖的问题, 但另一种可能有重复的麻烦</pre><pre>比如 js 中重复书写的 cvs 或者 elem 对象, py 的 self 更是惯用</pre><pre>那么如果允许在任意位置引入模块覆盖局部作用域就轻松一些, 像:</pre><pre class='code_block'><pre>(def s (string nothing))</pre><pre>(def lib (module http://server.do/lib.cirru))</pre><pre>(. lib echo s)</pre><pre>(. lib</pre><div class='code_block'><pre>(echo s)</pre><pre>(inspect s))</pre><pre>(alert)</pre></div></code></pre><pre><code class="inline_code">.</code> 将 <code class="inline_code">lib</code> 的方法添加到一个内部可访问的作用域, 简化书写</pre><pre>不过问题是覆盖还是可能发生, 需要其他规则来辅助</pre><pre> </pre><pre>教程的例子里, 作用域手工生成, 就像平常用的数据结构一样</pre><pre>因此代码的重用就可以类比重用作用域, 至少看起来和面向对象很像</pre><pre>而且也有语言看起来就是拷贝作用域来实现面向对象的</pre><pre><a href="https://github.com/indutny/candor#readme">github.com/indutny/candor#readme</a></pre><pre>对于具体实现, 尚且有难题. 但也许操作作用域会是有趣的东西</pre><pre>其实 <code class="inline_code">Cirru</code> 如果能成, 数据和程序的紧密度估计不减 Lisp</pre><pre>因为从代码读取的源码的形式是一致的, 甚至不会有 Lisp 的反引号语法</pre><pre>那么尝试呈现语言内部的机理到语言的使用环境, 类似会有怪的功能</pre><pre>目前我无法实现, 但存这一点思路或许可行的</pre><pre> </pre><pre>更出格的想法是用 DOM 存储数据, 程序直接在 DOMM 上运行</pre><pre>此前写 <code class="inline_code">code_blocks</code> 我用数组存代码, 再实时得绘制出来</pre><pre>这次编辑器部分直接操作 DOM, 效果不错, 验证是可行的</pre><pre>代码假如也能在 DOM 直接执行, Live-Coding 就很贴近了</pre><pre>比如说写代码的时候就能清楚当前的作用域有哪些内容, 怎样补全</pre><pre>还有比如错误提示, 在出错时其实能获取元素, 甚至在元素上标记</pre><pre>如执行到一标签认为类型不对, 可直接存下 elem 一备标记</pre><pre>而且能有各种颜色动画等标记方式可以优化代码具体的内容</pre><pre>DOM 是一种存储数据的方式, 特别是它完全是可见的</pre><pre> </pre><pre>一门语言该有哪些特性我并不清晰, 现在想的主要是怎样更灵活</pre><pre>如果语言里有可以再拆散的部件, 我很想看看一一分离的效果</pre><pre>一门特性极多甚至难以完全掌握的语言不是好的工具</pre><pre>目前代码不知怎样才能将脚手架搭建完成, 所以先打算搁置了</pre><pre> </pre><div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'jiyinyiyong';
      // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script');
          dsq.type = 'text/javascript';
          dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          if (document.getElementsByTagName('head')[0]) {
            document.getElementsByTagName('body')[0].appendChild(dsq);
          }
      })();
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="http://disqus.com/?ref_noscript">
      comments powered by Disqus.
    </a>
  </noscript>
  <a href="http://disqus.com" class="dsq-brlink">
    comments powered by
    <span class="logo-disqus">
      Disqus
    </span>
  </a>
</div></div>