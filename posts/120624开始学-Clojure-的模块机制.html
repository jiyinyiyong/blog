<div id='article'><title>陆续会把相关的笔记写在这里</title><a id='home' href='../index.html'>Home</a><link rel="stylesheet" href="../style.css"><p>&nbsp;</p><p><p class='title'>陆续会把相关的笔记写在这里</p></p><p>&nbsp;</p><p>因为没有 Java 基础, <code class="inline_code">namespace</code> 的概念不好理解, 于是去豆瓣发问</p><p><a href="http://www.douban.com/group/topic/30612772/">www.douban.com/group/topic/30612772/</a></p><p><code class="inline_code">hangz</code> 居然回复我了, 推荐去 <code class="inline_code">clojuredocs</code> 看命令, 我打算去看</p><p>&nbsp;</p><p>&nbsp;</p><div class='code_block'><p class='code_line'>$&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>editable&nbsp;=&nbsp;'contenteditable'</p><p class='code_line'>capet&nbsp;=&nbsp;"&ltcode&nbsp;id='target'&nbsp;#{editable}='true'/&gt;"</p><p class='code_line'>blank&nbsp;=&nbsp;['',&nbsp;'&ltbr&gt;']</p><p class='code_line'>paste&nbsp;=&nbsp;''</p><p class='code_line'>&nbsp;</p><p class='code_line'>p&nbsp;=&nbsp;-&gt;&nbsp;$&nbsp;'#point'</p><p class='code_line'>t&nbsp;=&nbsp;-&gt;&nbsp;$&nbsp;'#target'</p><p class='code_line'>&nbsp;</p><p class='code_line'>empty&nbsp;=&nbsp;(elem)&nbsp;-&gt;&nbsp;elem.html()&nbsp;in&nbsp;blank</p><p class='code_line'>root&nbsp;=&nbsp;(elem)&nbsp;-&gt;&nbsp;elem.parent().attr('id')&nbsp;is&nbsp;'editor'</p><p class='code_line'>exist&nbsp;=&nbsp;(elem)&nbsp;-&gt;&nbsp;elem.length&nbsp;&gt;&nbsp;0</p><p class='code_line'>leaf&nbsp;=&nbsp;(elem)&nbsp;-&gt;&nbsp;elem[0].tagName&nbsp;is&nbsp;'CODE'</p><p class='code_line'>&nbsp;</p><p class='code_line'>target&nbsp;=&nbsp;(elem)&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>elem.attr('id',&nbsp;'point').attr(editable,&nbsp;'true')</p></div><p class='code_line'>&nbsp;</p><p class='code_line'>point&nbsp;=&nbsp;(refocus&nbsp;=&nbsp;yes)&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>old&nbsp;=&nbsp;p().removeAttr('id').removeAttr&nbsp;editable</p><p class='code_line'>if&nbsp;exist&nbsp;old</p><div class='code_block'><p class='code_line'>old.html&nbsp;(old.html().replace&nbsp;/\&ltbr\&gt;/g,&nbsp;'')</p><p class='code_line'>old[0].onclick&nbsp;=&nbsp;(e)&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>old.attr('id',&nbsp;'target').attr(editable,&nbsp;'true')</p><p class='code_line'>point&nbsp;off</p><p class='code_line'>e.stopPropagation()</p></div><p class='code_line'>while&nbsp;empty&nbsp;old</p><div class='code_block'><p class='code_line'>up&nbsp;=&nbsp;old.parent()</p><p class='code_line'>old.remove()</p><p class='code_line'>old&nbsp;=&nbsp;up</p><p class='code_line'>if&nbsp;root&nbsp;old</p><div class='code_block'><p class='code_line'>if&nbsp;empty&nbsp;old&nbsp;then&nbsp;old.remove()</p><p class='code_line'>break</p></div></div></div><p class='code_line'>target&nbsp;t()</p><p class='code_line'>if&nbsp;refocus&nbsp;then&nbsp;focus()</p></div><p class='code_line'>&nbsp;</p><p class='code_line'>focus&nbsp;=&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>sel&nbsp;=&nbsp;window.getSelection()</p><p class='code_line'>sel.collapse&nbsp;p()[0],&nbsp;1</p><p class='code_line'>$('div').addClass&nbsp;'inline'</p><p class='code_line'>$('div:has(div)').removeClass&nbsp;'inline'</p><p class='code_line'>p().focus()</p></div><p class='code_line'>&nbsp;</p><p class='code_line'>$('#editor').append&nbsp;capet</p><p class='code_line'>t().attr&nbsp;'id',&nbsp;'point'</p><p class='code_line'>focus()</p><p class='code_line'>$('#editor')[0].onclick&nbsp;=&nbsp;(e)&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>focus()</p><p class='code_line'>e.stopPropagation()</p><p class='code_line'>parse()</p></div><p class='code_line'>&nbsp;</p><p class='code_line'>in_sight&nbsp;=&nbsp;yes</p><p class='code_line'>$('#editor').bind&nbsp;'focus',&nbsp;-&gt;&nbsp;in_sight&nbsp;=&nbsp;yes</p><p class='code_line'>$('#editor').bind&nbsp;'blur',&nbsp;-&gt;&nbsp;in_sight&nbsp;=&nbsp;no</p><p class='code_line'>&nbsp;</p><p class='code_line'>$('#editor').keydown&nbsp;(e)&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>#&nbsp;console.log&nbsp;e.keyCode</p><p class='code_line'>if&nbsp;in_sight</p><div class='code_block'><p class='code_line'>switch&nbsp;e.keyCode</p><div class='code_block'><p class='code_line'>when&nbsp;13</p><div class='code_block'><p class='code_line'>p().after&nbsp;"&ltdiv&gt;#{capet}&lt/div&gt;"</p><p class='code_line'>next&nbsp;=&nbsp;p().next()</p><p class='code_line'>next[0].onclick&nbsp;=&nbsp;(e)&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>next.append&nbsp;capet</p><p class='code_line'>point()</p><p class='code_line'>e.stopPropagation()</p></div></div><p class='code_line'>when&nbsp;9&nbsp;then&nbsp;p().after&nbsp;capet</p><p class='code_line'>when&nbsp;46&nbsp;#&nbsp;key&nbsp;delete</p><div class='code_block'><p class='code_line'>if&nbsp;exist&nbsp;p().prev()</p><div class='code_block'><p class='code_line'>it&nbsp;=&nbsp;p().prev()</p><p class='code_line'>if&nbsp;leaf&nbsp;it&nbsp;then&nbsp;it.attr&nbsp;'id',&nbsp;'target'</p><p class='code_line'>else&nbsp;it.append&nbsp;capet</p></div><p class='code_line'>else&nbsp;if&nbsp;exist&nbsp;p().next()</p><div class='code_block'><p class='code_line'>it&nbsp;=&nbsp;p().next()</p><p class='code_line'>if&nbsp;leaf&nbsp;it&nbsp;then&nbsp;it.attr&nbsp;'id',&nbsp;'target'</p><p class='code_line'>else&nbsp;it.prepend&nbsp;capet</p></div><p class='code_line'>else&nbsp;unless&nbsp;root&nbsp;p()</p><div class='code_block'><p class='code_line'>p().parent().after(capet).remove()</p></div><p class='code_line'>else&nbsp;unless&nbsp;p().html()&nbsp;in&nbsp;blank&nbsp;then&nbsp;p().after&nbsp;capet</p><p class='code_line'>else&nbsp;return&nbsp;on</p><p class='code_line'>p().remove()</p></div><p class='code_line'>when&nbsp;38&nbsp;#&nbsp;up</p><div class='code_block'><p class='code_line'>unless&nbsp;p().html()&nbsp;in&nbsp;blank&nbsp;then&nbsp;p().before&nbsp;capet</p><p class='code_line'>else&nbsp;if&nbsp;exist&nbsp;p().prev()</p><div class='code_block'><p class='code_line'>prev&nbsp;=&nbsp;p().prev()</p><p class='code_line'>if&nbsp;leaf&nbsp;prev&nbsp;then&nbsp;prev.attr&nbsp;'id',&nbsp;'target'</p><p class='code_line'>else&nbsp;prev.append&nbsp;capet&nbsp;&nbsp;</p></div><p class='code_line'>else&nbsp;unless&nbsp;root&nbsp;p()&nbsp;then&nbsp;p().parent().before&nbsp;capet</p><p class='code_line'>else&nbsp;return&nbsp;off</p></div><p class='code_line'>when&nbsp;40&nbsp;#&nbsp;down</p><div class='code_block'><p class='code_line'>unless&nbsp;p().html()&nbsp;in&nbsp;blank&nbsp;then&nbsp;p().after&nbsp;capet</p><p class='code_line'>else&nbsp;if&nbsp;exist&nbsp;p().next()</p><div class='code_block'><p class='code_line'>next&nbsp;=&nbsp;p().next()</p><p class='code_line'>if&nbsp;leaf&nbsp;next&nbsp;then&nbsp;next.attr&nbsp;'id',&nbsp;'target'</p><p class='code_line'>else&nbsp;next.prepend&nbsp;capet&nbsp;&nbsp;</p></div><p class='code_line'>else&nbsp;unless&nbsp;root&nbsp;p()&nbsp;then&nbsp;p().parent().after&nbsp;capet</p><p class='code_line'>else&nbsp;return&nbsp;off</p></div><p class='code_line'>when&nbsp;219&nbsp;#&nbsp;ctrl&nbsp;+&nbsp;[</p><div class='code_block'><p class='code_line'>if&nbsp;e.ctrlKey&nbsp;and&nbsp;(not&nbsp;(root&nbsp;p()))</p><div class='code_block'><p class='code_line'>up&nbsp;=&nbsp;p().parent()</p><p class='code_line'>up.after&nbsp;capet</p><p class='code_line'>point()</p><p class='code_line'>console.log&nbsp;up.parent()</p><p class='code_line'>paste&nbsp;=&nbsp;up[0].innerHTML&nbsp;or&nbsp;''</p><p class='code_line'>up.remove()</p></div><p class='code_line'>return&nbsp;on</p></div><p class='code_line'>when&nbsp;221&nbsp;#&nbsp;ctrl&nbsp;+&nbsp;]</p><div class='code_block'><p class='code_line'>if&nbsp;e.ctrlKey&nbsp;and&nbsp;paste.length&nbsp;&gt;&nbsp;0</p><div class='code_block'><p class='code_line'>p().before&nbsp;paste</p></div><p class='code_line'>return&nbsp;on</p></div><p class='code_line'>when&nbsp;33&nbsp;#&nbsp;pgup</p><div class='code_block'><p class='code_line'>unless&nbsp;root&nbsp;p()&nbsp;then&nbsp;p().parent().before&nbsp;capet</p><p class='code_line'>else&nbsp;return&nbsp;on</p></div><p class='code_line'>when&nbsp;34&nbsp;#&nbsp;pgdown</p><div class='code_block'><p class='code_line'>unless&nbsp;root&nbsp;p()&nbsp;then&nbsp;p().parent().after&nbsp;capet</p><p class='code_line'>else&nbsp;return&nbsp;on</p></div><p class='code_line'>else&nbsp;return&nbsp;on</p></div><p class='code_line'>point()</p></div><p class='code_line'>e.stopPropagation()</p><p class='code_line'>off</p></div><p class='code_line'>&nbsp;</p><p class='code_line'>parse&nbsp;=&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>map&nbsp;=&nbsp;(item,&nbsp;b)&nbsp;-&gt;</p><div class='code_block'><p class='code_line'>if&nbsp;leaf&nbsp;[item]&nbsp;then&nbsp;item.innerText</p><p class='code_line'>else&nbsp;[$.map&nbsp;item.children,&nbsp;(x)&nbsp;-&gt;&nbsp;map&nbsp;x]</p></div><p class='code_line'>res&nbsp;=&nbsp;$.map&nbsp;$('#editor')[0].children,&nbsp;map</p><p class='code_line'>console.log&nbsp;'res:',&nbsp;res</p></div></div></code></div><p>&nbsp;</p>   <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jiyinyiyong'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div>   <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jiyinyiyong'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>